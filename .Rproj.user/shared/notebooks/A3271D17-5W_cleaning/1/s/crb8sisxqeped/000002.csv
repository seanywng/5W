"0","locations <- read_csv(""locations.csv"") %>%"
"0","  mutate(estado    = rm_accent(str_to_upper(estado)),"
"0","         municipio = rm_accent(str_to_upper(municipio)),"
"0","         parroquia = rm_accent(str_to_upper(parroquia)),"
"0","         ubicacion = rm_accent(str_to_upper(ubicacion)))"
"1","[1m[1mRows: [1m[22m[34m[34m2623[34m[39m [1m[1mColumns: [1m[22m[34m[34m7[34m[39m
"
"1","[36m--[39m [1m[1mColumn specification[1m[22m [36m---------------------------------------------------------------------[39m
[1mDelimiter:[22m "",""
[31mchr[39m (7): estado, pcode1, municipio, pcode2, parroquia, pcode3, ubicacion
"
"1","
[36mi[39m Use [38;5;251m[48;5;235m[38;5;251m[48;5;235m`spec()`[48;5;235m[38;5;251m[49m[39m to retrieve the full column specification for this data.
[36mi[39m Specify the column types or set [38;5;251m[48;5;235m[38;5;251m[48;5;235m`show_col_types = FALSE`[48;5;235m[38;5;251m[49m[39m to quiet this message.
"
"0","# for filling in missing values"
"0","adm_dirty1 <- adm_dirty %>% "
"0","  left_join(locations, by = ""ubicacion"") %>% "
"0","  mutate(estado    = coalesce(estado.x, estado.y),"
"0","         pcode1    = coalesce(pcode1.x, pcode1.y),"
"0","         municipio = coalesce(municipio.x, municipio.y),"
"0","         pcode2    = coalesce(pcode2.x, pcode2.y),"
"0","         parroquia = coalesce(parroquia.x, parroquia.y),"
"0","         pcode3    = coalesce(pcode3.x, pcode3.y)) %>% "
"0","  select(-estado.x, -estado.y, -pcode1.x, -pcode1.y,"
"0","         -municipio.x, -municipio.y, -pcode2.x, -pcode2.y,"
"0","         -parroquia.x, -parroquia.y, -pcode3.x, -pcode3.y) %>% "
"0","  distinct()"
"0",""
"0","# bind_rows() does not care about column sequence "
"0","# but put adm_clean first in the bind_rows() as the sequence is important later"
"0","act2 <- bind_rows(adm_clean, adm_dirty1)"
"0",""
"0","# checking that the number of beneficiaries has stayed the same"
"0","sum(act1$total_beneficiarios, na.rm = TRUE)"
"1","[1]"
"1"," 28965878"
"1","
"
"0","sum(act2$total_beneficiarios, na.rm = TRUE)"
"1","[1]"
"1"," 28965878"
"1","
"
"0","sum(is.na(act1$total_beneficiarios))"
"1","[1]"
"1"," 1"
"1","
"
